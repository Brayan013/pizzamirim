<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Pizzaria Mirim — Fazer Pedido</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;600&display=swap');

    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      font-family: 'Poppins', sans-serif;
      color: #fff;
      background: url('FUNDODAPIZZA.jpg') center center/cover no-repeat fixed;
      position: relative;
      min-height: 100vh;
      overflow-x: hidden;
    }

    body::before {
      content: "";
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.65);
      z-index: 0;
      pointer-events: none;
    }

    .container {
      position: relative;
      max-width: 480px;
      margin: 60px auto 40px;
      background: rgba(255, 255, 255, 0.1);
      padding: 35px 40px 40px;
      border-radius: 20px;
      box-shadow:
        0 8px 32px rgba(255, 153, 0, 0.4),
        0 4px 16px rgba(0, 0, 0, 0.6);
      backdrop-filter: blur(12px);
      z-index: 1;
      text-align: center;
      border: 2px solid rgba(255, 153, 0, 0.8);
      transition: box-shadow 0.3s ease;
    }

    .container:hover {
      box-shadow:
        0 12px 48px rgba(255, 153, 0, 0.8),
        0 6px 24px rgba(0, 0, 0, 0.8);
    }

    .pizza-icon {
      width: 90px;
      margin-bottom: 25px;
      filter: drop-shadow(0 0 6px #ff9900aa);
      transition: transform 0.3s ease;
    }

    .pizza-icon:hover {
      transform: rotate(15deg);
    }

    h1 {
      font-weight: 600;
      font-size: 2.6rem;
      margin-bottom: 6px;
      color: #ffb347;
      text-shadow: 1px 1px 5px #ff6f00cc;
    }

    h2 {
      font-weight: 300;
      font-size: 1.3rem;
      margin-bottom: 20px;
      color: #ffd580;
      letter-spacing: 1.1px;
      text-shadow: 0 0 4px #ffa500bb;
    }

    label {
      display: block;
      font-weight: 600;
      color: #ffe6b3;
      user-select: none;
      margin-bottom: 5px;
    }

    input, select {
      padding: 14px 18px;
      border-radius: 12px;
      border: none;
      font-size: 1rem;
      font-weight: 500;
      outline-offset: 3px;
      outline-color: #ffb347;
      background: rgba(255, 255, 255, 0.2);
      color: #fff;
      transition: background 0.3s ease, outline-color 0.3s ease;
      user-select: text;
      appearance: none;
      -webkit-appearance: none;
      -moz-appearance: none;
      background-image: url("data:image/svg+xml;charset=US-ASCII,%3Csvg%20width%3D'14'%20height%3D'10'%20viewBox%3D'0%200%2014%2010'%20xmlns%3D'http%3A//www.w3.org/2000/svg'%3E%3Cpath%20d%3D'M1%201l6%206%206-6'%20stroke%3D'%23fff'%20stroke-width%3D'2'%20fill%3D'none'%20fill-rule%3D'evenodd'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 15px center;
      background-size: 14px 10px;
      width: 100%;
      box-sizing: border-box;
    }

    select option {
      color: #000;
      background: #fff;
    }

    select:invalid {
      color: #ffd580cc;
    }

    input::placeholder {
      color: #ffd580cc;
      font-style: italic;
    }

    input:focus, select:focus {
      background: rgba(255, 255, 255, 0.35);
      outline-color: #ff9900;
      color: #000;
    }

    button {
      margin-top: 28px;
      padding: 16px 0;
      background: linear-gradient(45deg, #ff9900, #ffb347);
      font-weight: 700;
      font-size: 1.1rem;
      color: #fff;
      border: none;
      border-radius: 14px;
      cursor: pointer;
      box-shadow:
        0 5px 12px #ffb347cc,
        inset 0 -3px 8px #ff660000;
      transition: background 0.4s ease, box-shadow 0.3s ease;
      user-select: none;
      width: 100%;
    }

    button:hover {
      background: linear-gradient(45deg, #ffb347, #ff9900);
      box-shadow:
        0 8px 18px #ffb347ee,
        inset 0 -3px 12px #ff660022;
    }

    .pix-info {
      margin-top: 38px;
      background: rgba(255, 255, 255, 0.15);
      padding: 16px 25px;
      border-radius: 18px;
      font-size: 1.15rem;
      font-weight: 700;
      color: #fff;
      letter-spacing: 2px;
      user-select: all;
      text-shadow: 0 0 8px #ff9900cc;
      box-shadow: 0 0 12px #ff9900bb;
      max-width: 350px;
      margin-left: auto;
      margin-right: auto;
    }

    .error-msg {
      color: #ff6666;
      font-weight: 600;
      margin-top: 4px;
      font-size: 0.85rem;
      text-align: left;
      min-height: 18px;
    }

    footer {
      text-align: center;
      color: #ccc;
      font-size: 0.9rem;
      margin-bottom: 25px;
      user-select: none;
      z-index: 1;
      position: relative;
      text-shadow: 0 0 3px #000;
    }

    /* Pizzas caindo - correção */
    .pizza-falling {
      position: fixed;
      top: 0;
      pointer-events: none;
      user-select: none;
      z-index: 9999;
      opacity: 1;
      animation-name: fallPizza;
      animation-timing-function: linear;
      animation-fill-mode: forwards;
      animation-iteration-count: 1;
      width: 40px;
      height: 40px;
    }

    @keyframes fallPizza {
      0% {
        transform: translateY(0) rotate(0deg);
        opacity: 1;
      }
      100% {
        transform: translateY(110vh) rotate(360deg);
        opacity: 0;
      }
    }

    /* Estilo para imagem no canto superior direito */
    .top-right-logo {
      position: fixed;
      top: 30px;
      right: 70px;
      width: 150px;
      height: 150px;
      border: 3.5px solid #1e90ff;
      border-radius: 50%;
      box-shadow:
        0 0 15px #1e90ff,
        0 0 35px #1e90ff;
      background: white;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
      z-index: 99999;
      user-select: none;
    }

    .top-right-logo img {
      width: 160%;
      height: 160%;
      object-fit: cover;
      border-radius: 50%;
    }

    /* Layout dos itens de pedido (sabor + quantidade) */
    #itensPedido {
      margin-bottom: 20px;
    }

    .itemPedido {
      margin-bottom: 20px;
      border: 2px solid rgba(255, 153, 0, 0.8);
      padding: 12px 15px;
      border-radius: 15px;
      background: rgba(255, 255, 255, 0.12);

      display: flex;
      flex-wrap: wrap;
      align-items: center;
      gap: 12px;
      justify-content: flex-start;
      position: relative;
    }

    .itemPedido label {
      flex-basis: 100%;
      font-weight: 600;
      margin-bottom: 5px;
      color: #ffe6b3;
      user-select: none;
    }

    .itemPedido select,
    .itemPedido input {
      flex: 1 1 140px;
      margin-top: 0;
      width: auto;
      min-width: 120px;
      box-sizing: border-box;
      color: #fff;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 12px;
      border: none;
      padding: 14px 18px;
      font-size: 1rem;
      font-weight: 500;
      outline-offset: 3px;
      outline-color: #ffb347;
      transition: background 0.3s ease, outline-color 0.3s ease;
      appearance: none;
      -webkit-appearance: none;
      -moz-appearance: none;
    }

    .itemPedido select:focus,
    .itemPedido input:focus {
      background: rgba(255, 255, 255, 0.35);
      outline-color: #ff9900;
      color: #000;
    }

    /* Botão remover à direita, alinhado com os selects */
    .removerItem {
      position: static;
      margin-left: auto;
      align-self: center;
      background: transparent;
      border: none;
      color: #ffb347;
      font-size: 1.5rem;
      cursor: pointer;
      font-weight: 700;
      user-select: none;
      transition: color 0.3s ease;
      padding: 0 6px;
      flex-shrink: 0;
      line-height: 1;
    }

    .removerItem:hover {
      color: #ff6600;
    }

    @media (max-width: 520px) {
      .container {
        margin: 40px 15px 30px;
        padding: 30px 25px 30px;
      }
      h1 {
        font-size: 2rem;
      }
      h2 {
        font-size: 1.1rem;
      }
      .pix-info {
        font-size: 1rem;
        max-width: 100%;
      }
      .pizza-falling {
        width: 30px;
        height: 30px;
      }
      .top-right-logo {
        width: 60px;
        height: 60px;
        border-width: 2.5px;
      }
      .itemPedido {
        flex-direction: column;
        align-items: flex-start;
      }
      .itemPedido select,
      .itemPedido input {
        flex-basis: 100%;
        width: 100%;
        min-width: auto;
      }
      .removerItem {
        margin-left: 0;
        margin-top: 10px;
        align-self: flex-start;
      }
    }
  </style>
</head>
<body>
  <div class="top-right-logo" aria-label="Logo da empresa no canto superior direito" role="img">
    <img src="logo-neon.jpg" alt="Logo neon da empresa" />
  </div>

  <div class="container" role="main" aria-label="Formulário para fazer pedido de pizza">
    <img
      src="https://cdn-icons-png.flaticon.com/512/3595/3595455.png"
      alt="Ícone de pizza"
      class="pizza-icon"
      aria-hidden="true"
      draggable="false"
    />
    <h1>Pizzaria Mirim</h1>
    <h2>Faça seu pedido</h2>

    <form id="pedidoForm" novalidate aria-describedby="pixInfo">

      <div id="itensPedido">
        <!-- Primeiro item inicial -->
        <div class="itemPedido">
          <label for="sabor1">Sabor</label>
          <select id="sabor1" class="sabor" required aria-required="true" aria-label="Sabor da pizza">
            <option value="" disabled selected>Selecione um sabor</option>
            <option value="Mussarela">Mussarela</option>
            <option value="Calabresa">Calabresa</option>
          </select>
          <div class="error-msg"></div>

          <label for="quantidade1">Quantidade</label>
          <input
            id="quantidade1"
            type="number"
            min="1"
            value="1"
            required
            aria-required="true"
            class="quantidade"
            aria-label="Quantidade de pizzas para este sabor"
          />
          <div class="error-msg"></div>

          <button type="button" class="removerItem" aria-label="Remover este sabor do pedido" title="Remover sabor">✕</button>
        </div>
      </div>

      <button type="button" id="adicionarSabor" aria-label="Adicionar mais sabor ao pedido" style="margin-top: 0; margin-bottom: 25px;">
        + Adicionar sabor
      </button>

      <label for="nome">Nome completo</label>
      <input
        id="nome"
        type="text"
        placeholder="Seu nome completo"
        required
        aria-required="true"
      />
      <div class="error-msg" id="erroNome"></div>

      <label for="cpf">CPF</label>
      <input
        id="cpf"
        type="text"
        placeholder="000.000.000-00"
        required
        aria-required="true"
        maxlength="14"
      />
      <div class="error-msg" id="erroCpf"></div>

      <label for="whats">WhatsApp</label>
      <input
        id="whats"
        type="tel"
        placeholder="(00) 00000-0000"
        required
        aria-required="true"
        maxlength="15"
      />
      <div class="error-msg" id="erroWhats"></div>

      <label for="retirante">Nome de quem vai retirar</label>
      <input
        id="retirante"
        type="text"
        placeholder="Nome do retirante"
        required
        aria-required="true"
      />
      <div class="error-msg" id="erroRetirante"></div>

      <button type="submit" aria-label="Enviar pedido por WhatsApp e email">
        Enviar pedido (WhatsApp + E-mail)
      </button>
    </form>

    <div class="pix-info" id="pixInfo" tabindex="0" title="Chave PIX para pagamento">
      CNPJ para pagamento via PIX: <span id="pixKey">47.746.532/0001-36</span>
    </div>
  </div>

  <footer>
    📍 Rua Tibiriçá, nº 186 - Portão 2 &nbsp; • &nbsp;
    Todo recurso arrecadado será destinado aos adolescentes matriculados.
  </footer>

  <script>
    // Máscara CPF
    function mascaraCPF(cpf) {
      return cpf
        .replace(/\D/g, "")
        .replace(/(\d{3})(\d)/, "$1.$2")
        .replace(/(\d{3})(\d)/, "$1.$2")
        .replace(/(\d{3})(\d{1,2})$/, "$1-$2")
        .substring(0, 14);
    }

    // Máscara WhatsApp
    function mascaraWhats(value) {
      return value
        .replace(/\D/g, "")
        .replace(/(\d{2})(\d)/, "($1) $2")
        .replace(/(\d{5})(\d)/, "$1-$2")
        .substring(0, 15);
    }

    // Validação CPF
    function validarCPF(strCPF) {
      strCPF = strCPF.replace(/[^\d]+/g, "");
      if (strCPF.length !== 11) return false;
      if (/^(\d)\1+$/.test(strCPF)) return false;

      let soma = 0;
      let resto;

      for (let i = 1; i <= 9; i++)
        soma += parseInt(strCPF.substring(i - 1, i)) * (11 - i);

      resto = (soma * 10) % 11;
      if (resto === 10 || resto === 11) resto = 0;
      if (resto !== parseInt(strCPF.substring(9, 10))) return false;

      soma = 0;
      for (let i = 1; i <= 10; i++)
        soma += parseInt(strCPF.substring(i - 1, i)) * (12 - i);

      resto = (soma * 10) % 11;
      if (resto === 10 || resto === 11) resto = 0;
      if (resto !== parseInt(strCPF.substring(10, 11))) return false;

      return true;
    }

    const form = document.getElementById("pedidoForm");
    const adicionarSaborBtn = document.getElementById("adicionarSabor");
    const itensPedido = document.getElementById("itensPedido");

    // Aplica máscaras enquanto digita
    document.getElementById("cpf").addEventListener("input", e => {
      e.target.value = mascaraCPF(e.target.value);
    });

    document.getElementById("whats").addEventListener("input", e => {
      e.target.value = mascaraWhats(e.target.value);
    });

    // Adicionar novo sabor
    adicionarSaborBtn.addEventListener("click", () => {
      const index = itensPedido.children.length + 1;

      const div = document.createElement("div");
      div.classList.add("itemPedido");
      div.innerHTML = `
        <label for="sabor${index}">Sabor</label>
        <select id="sabor${index}" class="sabor" required aria-required="true" aria-label="Sabor da pizza">
          <option value="" disabled selected>Selecione um sabor</option>
          <option value="Mussarela">Mussarela</option>
          <option value="Calabresa">Calabresa</option>
        </select>
        <div class="error-msg"></div>

        <label for="quantidade${index}">Quantidade</label>
        <input
          id="quantidade${index}"
          type="number"
          min="1"
          value="1"
          required
          aria-required="true"
          class="quantidade"
          aria-label="Quantidade de pizzas para este sabor"
        />
        <div class="error-msg"></div>

        <button type="button" class="removerItem" aria-label="Remover este sabor do pedido" title="Remover sabor">✕</button>
      `;

      itensPedido.appendChild(div);

      div.querySelector(".removerItem").addEventListener("click", () => {
        if (itensPedido.children.length > 1) {
          div.remove();
        } else {
          alert("Você deve manter pelo menos um sabor no pedido.");
        }
      });
    });

    // Remover item já existente
    document.querySelectorAll(".removerItem").forEach(btn => {
      btn.addEventListener("click", (e) => {
        if (itensPedido.children.length > 1) {
          e.target.closest(".itemPedido").remove();
        } else {
          alert("Você deve manter pelo menos um sabor no pedido.");
        }
      });
    });

    form.addEventListener("submit", (e) => {
      e.preventDefault();

      // Limpar erros anteriores
      document.querySelectorAll(".error-msg").forEach(el => (el.textContent = ""));

      let valido = true;

      // Valida sabores e quantidades
      const sabores = form.querySelectorAll(".sabor");
      const quantidades = form.querySelectorAll(".quantidade");

      sabores.forEach((select, i) => {
        if (!select.value) {
          valido = false;
          select.nextElementSibling.textContent = "Selecione um sabor.";
        }
      });

      quantidades.forEach((input) => {
        if (!input.value || input.value < 1) {
          valido = false;
          input.nextElementSibling.textContent = "Quantidade inválida.";
        }
      });

      // Nome
      const nome = form.nome.value.trim();
      if (!nome) {
        valido = false;
        document.getElementById("erroNome").textContent = "Digite seu nome completo.";
      }

      // CPF
      const cpf = form.cpf.value.trim();
      if (!validarCPF(cpf)) {
        valido = false;
        document.getElementById("erroCpf").textContent = "CPF inválido.";
      }

      // WhatsApp
      const whats = form.whats.value.trim();
      if (whats.length < 14) {
        valido = false;
        document.getElementById("erroWhats").textContent = "Número WhatsApp incompleto.";
      }

      // Retirante
      const retirante = form.retirante.value.trim();
      if (!retirante) {
        valido = false;
        document.getElementById("erroRetirante").textContent = "Informe o nome de quem vai retirar.";
      }

      if (!valido) return;

      // Montar mensagem para WhatsApp e e-mail
      let mensagem = `*Pedido Pizzaria Mirim*\n\n`;
      mensagem += `*Itens:*\n`;

      for (let i = 0; i < sabores.length; i++) {
        mensagem += `- ${quantidades[i].value}x ${sabores[i].value}\n`;
      }

      mensagem += `\n*Cliente:* ${nome}\n`;
      mensagem += `*CPF:* ${cpf}\n`;
      mensagem += `*WhatsApp:* ${whats}\n`;
      mensagem += `*Retirante:* ${retirante}\n`;

      // Link para WhatsApp (número do pizzaria aqui)
      const numeroPizzaria = "5518992033059"; // Alterar para número real

      const urlWhats = `https://api.whatsapp.com/send?phone=${numeroPizzaria}&text=${encodeURIComponent(mensagem)}`;

      // Abrir WhatsApp no navegador
      window.open(urlWhats, "_blank");

      // Envio para e-mail via mailto (opcional)
      /*
      const mailto = `mailto:pizzaria@email.com?subject=Pedido Pizzaria Mirim&body=${encodeURIComponent(mensagem)}`;
      window.open(mailto, "_blank");
      */
    });

    // --- Pizzas caindo ---
    const pizzaURL = "https://cdn-icons-png.flaticon.com/512/3595/3595455.png";

    function criarPizza() {
      const pizza = document.createElement("img");
      pizza.src = pizzaURL;
      pizza.classList.add("pizza-falling");

      const maxX = window.innerWidth - 40;
      pizza.style.left = Math.floor(Math.random() * maxX) + "px";

      const duracao = 5000 + Math.random() * 5000;
      pizza.style.animationDuration = duracao + "ms";

      pizza.style.animationDelay = Math.random() * 10 + "ms";

      document.body.appendChild(pizza);

      pizza.addEventListener("animationend", () => {
        pizza.remove();
      });
    }

    setInterval(criarPizza, 600);

    for (let i = 0; i < 10; i++) {
      setTimeout(criarPizza, i * 350);
    }
  </script>
</body>
</html>
